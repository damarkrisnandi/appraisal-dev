import{a as ve}from"./chunk-54BBQ6WT.js";import{A as Ce,B as V,K as k,e as ue,h as R,m as ge,n as _e,u as be,y as ye}from"./chunk-RAQWMTHX.js";import{b as G,f as ke}from"./chunk-R7WHARF6.js";import{p as $,q as Se}from"./chunk-W6BPNARK.js";import"./chunk-4YRY4IP2.js";import"./chunk-EMVC5IJA.js";import"./chunk-AIVTLASU.js";import"./chunk-AUJU2NY4.js";import{a as W}from"./chunk-OQKDZ6KP.js";import{b as E,e as N,f as P,g as w,h as S,l as j,m as B,q as he}from"./chunk-3RUIS27I.js";import{m as pe}from"./chunk-NXN4P4DR.js";import{a as O}from"./chunk-QASMVVIP.js";import{a as fe}from"./chunk-BUA7TEAX.js";import{ma as Q,qa as me}from"./chunk-22342MAH.js";import{$b as y,Ab as ae,Bb as n,Cb as a,Db as c,Hb as q,Ib as u,Jb as p,Qc as L,Sb as J,Tb as m,Ua as Z,Vb as F,Vc as de,Wb as ne,Xc as ce,Ya as r,Z as Y,Za as ee,_b as re,ac as D,ca as v,da as g,fb as l,ha as _,kc as le,lc as se,nc as I,ob as b,qb as te,ra as A,rb as d,sa as x,vb as T,wb as M,xb as ie,zb as oe,zc as C}from"./chunk-QSF35MWG.js";var f=class i{constructor(t,e,o,s,h){this.spinnerService=t;this.attitudeSkillService=e;this.messageService=o;this.confirmationService=s;this.confirmDialog=h;this.init()}state={$dataList:l([]),$dataLoading:l(!1),$pagingInfo:l(new W),$totalRowCount:l(1),$selectedData:l(null),$selectedVerified:l(!0),$loading:l(!1),$disabledTable:l(!1),$searchText:l(""),$searchBtnClickEvent:l(!1),$optionsCategory:l([]),$optionsMetricType:l([]),$metricList:l([]),$disabledUpdate:l(!0),$disabledSave:l(!0),$disabledCancel:l(!0),$formMode:l("idle")};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=l([{header:"No",class_td:"!text-center",type:"number"},{field:"assessmentCategory",header:"Category",class_td:"!text-center"},{field:"indicator",header:"Indicators",class_td:"!text-center"},{field:"metricType",header:"Metrics",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=C(()=>{let t=null;t={};let e;return e=this.$searchText()??"",t.indicator=e,t});indicatorAttitudeForm=l(new w({category:new S({value:null,disabled:!0}),indicator:new S({value:null,disabled:!0}),metricType:new S({value:null,disabled:!0})}));$optionsCategory=this.state.$optionsCategory.asReadonly();$optionsMetricType=this.state.$optionsMetricType.asReadonly();$metricList=this.state.$metricList.asReadonly();$disabledSave=C(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=C(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=C(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();ref;dialogOptions={modal:!0,styleClass:"w-11/12 md:w-5/12"};init(){this.setSpinner(),this.populateList(),this.generateCategory(),this.generateMetric()}setSpinner(){O(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let t={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.attitudeSkillService.findByCriteriaPaginated(t).subscribe(e=>{e.status&&(this.state.$pagingInfo.set(e.object.pagingInfo||new W),this.state.$dataList.set(e.object.dataList||[]),this.state.$totalRowCount.set(e.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoad(t){this.populateList()}generateCategory(){let t=[];this.attitudeSkillService.getCategory().subscribe(e=>{e.status&&e.object.map(o=>{t.push({value:o.id,label:o.name})})}),this.state.$optionsCategory.set(t)}generateMetric(){let t=[],e=[];this.attitudeSkillService.getMetric().subscribe(o=>{o.status&&o.object.map(s=>{t.push({value:s.id,label:s.name}),e.push(s)})}),this.state.$optionsMetricType.set(t),this.state.$metricList.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked(t){this.state.$searchText.set(t),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddIndicator(){this.resetState(),this.state.$formMode.set("add")}editAction(t){this.state.$selectedData.set(t),this.state.$formMode.set("edit")}onSaveFormAdd(t){this.attitudeSkillService.saveIndicator(t).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data indicator!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>this.state.$formMode.set("idle")}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle")}deleteAction(t){this.state.$selectedData.set(t),this.confirmationService.confirm({header:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus indicator ini?",accept:()=>{this.attitudeSkillService.deleteIndicator(t.id).subscribe(e=>{if(e.status){let o=`Hapus data ${this.$selectedData()?.indicator} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:o}),this.state.$formMode.set("idle"),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}static \u0275fac=function(e){return new(e||i)(v(fe),v(ve),v(me),v(Q),v(Q))};static \u0275prov=Y({token:i,factory:i.\u0275fac})};var H=class i{attitudeSkillStore=g(f);search=this.attitudeSkillStore.$searchText();searchForm=new w({search:new S({value:"",disabled:!1})});tempSearch="";constructor(){this.onSearchChanges()}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(t=>{this.tempSearch=t})}onRefreshSearch(){this.searchForm.controls.search.setValue(""),this.attitudeSkillStore.onRefreshSearchClicked()}onButtonClicked(){this.attitudeSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-attitude-skill-search"]],standalone:!0,features:[y],decls:10,vars:1,consts:[[1,"mb-2"],[1,"grid","grid-cols-8","grid-flow-rows","gap-2",2,"align-items","center",3,"formGroup"],[1,"col-span-1","md:col-span-1"],[1,"col-span-8","md:col-span-7"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),m(3,"Search Indicator: "),a(),n(4,"p-inputgroup",3),c(5,"input",4),n(6,"p-inputgroup-addon")(7,"p-button",5),u("click",function(){return o.onButtonClicked()}),a()(),n(8,"p-inputgroup-addon")(9,"p-button",6),u("click",function(){return o.onRefreshSearch()}),a()()()()()),e&2&&(r(),d("formGroup",o.searchForm))},dependencies:[k,E,N,P,G,$,ye,ke,j,B]})};var Fe=()=>[5,10,20];function De(i,t){if(i&1&&(n(0,"th",10),m(1),a()),i&2){let e=t.$implicit;r(),F(" ",e.header," ")}}function Ie(i,t){if(i&1&&(n(0,"tr"),b(1,De,2,1,"th",9),a()),i&2){let e=t.$implicit;r(),d("ngForOf",e)}}function Le(i,t){if(i&1&&(n(0,"td"),m(1),a()),i&2){let e=p().$implicit,o=p().rowIndex;T(e.class_td),r(),F(" ",o+1," ")}}function Re(i,t){if(i&1&&(n(0,"td"),c(1,"div",13),a()),i&2){let e=p().$implicit,o=p().$implicit;T(e.class_td),r(),d("outerHTML",e.template(o[e.field]),Z)}}function Ee(i,t){if(i&1){let e=q();n(0,"td")(1,"p-button",14),u("click",function(){A(e);let s=p(2).$implicit,h=p();return x(h.attitudeSkillStore.editAction(s))}),a(),n(2,"p-button",15),u("click",function(){A(e);let s=p(2).$implicit,h=p();return x(h.attitudeSkillStore.deleteAction(s))}),a()()}if(i&2){let e=p().$implicit;T(e.class_td)}}function Ne(i,t){if(i&1&&(n(0,"td"),m(1),a()),i&2){let e=p().$implicit,o=p().$implicit;T(e.class_td),r(),F(" ",o[e.field].name?o[e.field].name:o[e.field]," ")}}function Pe(i,t){if(i&1&&b(0,Le,2,3,"td",12)(1,Re,2,3,"td",12)(2,Ee,3,2,"td",12)(3,Ne,2,3,"td",12),i&2){let e,o=t.$implicit;M((e=o.type)==="number"?0:e==="custom"?1:e==="action"?2:3)}}function je(i,t){if(i&1&&(n(0,"tr",11),oe(1,Pe,4,1,null,null,ie),a()),i&2){let e=t.$implicit,o=t.columns;d("pSelectableRow",e),r(),ae(o)}}function Be(i,t){if(i&1&&(n(0,"tr")(1,"td",16),m(2,"Data Kosong"),a()()),i&2){let e=p();r(),te("colspan",e.attitudeSkillStore.$cols().length)}}var K=class i{attitudeSkillStore=g(f);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-attitude-skill-list"]],standalone:!0,features:[y],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card","grid","gap-2"],[1,"grid","grid-cols-4","grid-flow-rows","gap-2"],["icon","pi pi-plus","label","Add Indicator","styleClass","p-button-contrast w-full !h-full",1,"col-start-4","col-end-5",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Edit Data","tooltipPosition","bottom",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,o){if(e&1){let s=q();n(0,"div",4),c(1,"app-attitude-skill-search"),n(2,"div",5)(3,"p-button",6),u("click",function(){return A(s),x(o.attitudeSkillStore.onAddIndicator())}),a()(),n(4,"p-table",7,0),u("onLazyLoad",function(Ae){return A(s),x(o.attitudeSkillStore.onLazyLoad(Ae))}),b(6,Ie,2,1,"ng-template",null,1,I)(8,je,3,1,"ng-template",null,2,I)(10,Be,3,1,"ng-template",null,3,I),a()(),c(12,"p-blockui",8)}if(e&2){let s=J(5),h=J(9);r(4),d("columns",o.attitudeSkillStore.$cols())("value",o.attitudeSkillStore.$dataList())("loading",o.attitudeSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",D(11,Fe))("paginatorDropdownAppendTo",h)("lazy",!0)("totalRecords",o.attitudeSkillStore.$totalRowCount()),r(8),d("blocked",o.attitudeSkillStore.$disabledTable())("target",s)}},dependencies:[k,$,ge,_e,L,be,ue,V,H]})};function Ve(i,t){if(i&1&&(n(0,"span",4),m(1),a()),i&2){let e=t.$implicit;r(),ne(" ",e.name," = ",e.description," ")}}var U=class i{constructor(t){this.router=t;this.selectedDataSubscription=O(this.attitudeSkillStore.$selectedData).subscribe(e=>{this.indicatorForm.patchValue({category:this.attitudeSkillStore.$selectedData()?.assessmentCategory?.id,indicator:this.attitudeSkillStore.$selectedData()?.indicator,metricType:this.attitudeSkillStore.$selectedData()?.metricType?.id})})}attitudeSkillStore=g(f);$header=C(()=>`Form ${this.attitudeSkillStore.$formMode()} Indicator`);indicatorForm=new w({category:new S({value:null,disabled:!1}),indicator:new S({value:"",disabled:!1}),metricType:new S({value:null,disabled:!1})});selectedDataSubscription;onSave(){let t={id:this.attitudeSkillStore.$selectedData()?this.attitudeSkillStore.$selectedData()?.id:null,assessmentCategoryId:this.indicatorForm.get("category")?.value,metricTypeId:this.indicatorForm.get("metricType")?.value,indicator:this.indicatorForm.get("indicator")?.value};this.attitudeSkillStore.onSaveFormAdd(t)}ngOnDestroy(){this.indicatorForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)(ee(pe))};static \u0275cmp=_({type:i,selectors:[["app-add-indicator"]],standalone:!0,features:[y],decls:25,vars:8,consts:[[1,"blue",3,"header"],[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2",3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["formControlName","category","name","category","styleClass","col-span-12 md:col-span-7","appendTo","body",3,"options"],["pInputText","","formControlName","indicator","name","indicator",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body",3,"options"],[1,"pt-10","grid","grid-flow-row"],[1,"col-span-12","md:col-span-1"],["class","col-span-12 md:col-span-2",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"]],template:function(e,o){e&1&&(n(0,"p-panel",0),le(1,"titlecase"),n(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),m(6,"Category:"),a(),c(7,"p-dropdown",5),a(),n(8,"div",3)(9,"label",4),m(10,"Indicators:"),a(),c(11,"input",6),a(),n(12,"div",3)(13,"label",4),m(14,"Type of Metrics:"),a(),c(15,"p-dropdown",7),a(),n(16,"div",8)(17,"label",9)(18,"b"),m(19,"*Notes:"),a()(),b(20,Ve,2,2,"span",10),a()(),n(21,"div",11)(22,"div",12)(23,"p-button",13),u("click",function(){return o.onSave()}),a(),n(24,"p-button",14),u("click",function(){return o.attitudeSkillStore.onCancelFormAdd()}),a()()()()()),e&2&&(d("header",se(1,6,o.$header())),r(3),d("formGroup",o.indicatorForm),r(4),d("options",o.attitudeSkillStore.$optionsCategory()),r(8),d("options",o.attitudeSkillStore.$optionsMetricType()),r(5),d("ngForOf",o.attitudeSkillStore.$metricList()),r(3),d("disabled",o.attitudeSkillStore.$disabledSave()))},dependencies:[ce,L,de,k,R,E,N,P,G,$,Ce,j,B,V,he,Se]})};var Oe=()=>["idle"];function ze(i,t){i&1&&(n(0,"p-panel",1)(1,"div",2),c(2,"app-attitude-skill-list"),a()())}function He(i,t){i&1&&c(0,"app-add-indicator")}var we=class i{attitudeSkillStore=g(f);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-attitude-skill-reference"]],standalone:!0,features:[re([f]),y],decls:3,vars:2,consts:[[1,"w-full"],["header","Assesment Reference",1,"blue"],[1,"mt-6"]],template:function(e,o){e&1&&(n(0,"div",0),b(1,ze,3,0,"p-panel",1)(2,He,1,0,"app-add-indicator"),a()),e&2&&(r(),M(D(1,Oe).includes(o.attitudeSkillStore.$formMode())?1:2))},dependencies:[k,R,K,U]})};export{we as AttitudeSkillReferenceComponent};
