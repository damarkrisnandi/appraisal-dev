import{a as Ce}from"./chunk-X7TTHRIB.js";import{a as $e}from"./chunk-IXWQW5YW.js";import{b as pe,c as be}from"./chunk-7RX4OO66.js";import{I as se,h as J,i as ie,m as oe,n as ne,w as ae,y as le}from"./chunk-DXN5HEWW.js";import{b as te,f as re}from"./chunk-CA2COJWB.js";import{n as H}from"./chunk-VEYZ72YH.js";import{a as L}from"./chunk-OQKDZ6KP.js";import{b as K,c as Q,e as W,f as X,h as C,l as Y,m as Z,o as ee}from"./chunk-6OBNDO3B.js";import{m as ye}from"./chunk-NXN4P4DR.js";import{a as ce}from"./chunk-QASMVVIP.js";import{a as U}from"./chunk-BUA7TEAX.js";import{ma as I,qa as G,ua as q}from"./chunk-22342MAH.js";import{$b as O,Ab as A,Bb as a,Cb as r,Db as S,Hb as $,Ib as g,Jb as c,Qc as z,Sb as N,Tb as d,Ub as T,Vb as v,Ya as s,Z as F,_b as B,a as _e,ac as k,b as Se,ca as u,da as _,fb as n,ha as E,nc as w,ob as b,ra as f,rb as p,sa as h,wb as V,zb as j,zc as y}from"./chunk-QSF35MWG.js";var x=class{id;indicator="";assessmentCategory=new de;metricType=new me;category},de=class{createdDate;createdBy;modifiedDate;modifiedBy;version;hidden;id;name;description},me=class{createdDate;createdBy;modifiedDate;modifiedBy;version;hidden;id;name;description};var R=class t{constructor(e,i,o,l,m,P){this.spinnerService=e;this.dialogService=i;this.messageService=o;this.router=l;this.confirmationService=m;this.attitudeService=P;this.init()}fb=_(ee);state={$dataList:n([]),$dataLoading:n(!1),$pagingInfo:n(new L),$totalRowCount:n(1),$selectedData:n(null),$disabledTable:n(!1),$optionsCategory:n([]),$optionsMetricType:n([]),$descMetricType:n([]),$searchText:n(""),$searchBtnClickEvent:n(!1),$formMode:n("idle"),$loading:n(!1)};$searchIndicator=n(this.fb.group({category:new C({value:null,disabled:!1}),searchText:new C({value:"",disabled:!1},[Q.required]),metricType:new C({value:null,disabled:!1})})).asReadonly();$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$attitudeCols=n([{field:"no",header:"No",class_td:"!text-center !max-w-[50px]",type:"no"},{field:"assessmentCategory",header:"Category",class_td:"!text-center"},{field:"indicator",header:"Indicator",class_td:"!text-center"},{field:"typeAnswer",header:"Type of Answer",class_td:"!text-center"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$optionsCategory=this.state.$optionsCategory.asReadonly();$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$searchText=y(()=>this.state.$searchText());$filter=y(()=>{let e=new x;return this.$searchText()&&(e={noTemplate:this.$searchText()}),e});$disabledTable=y(()=>this.state.$formMode()=="update");$formMode=this.state.$formMode.asReadonly();ref;init(){this.setSpinner(),this.setSearchCategory(),this.generateMetric(),this.populateList()}setSpinner(){ce(this.state.$loading).subscribe(e=>e?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let e=new x;switch(this.$searchIndicator().get("category")?.value){case"category":e={category:this.$searchIndicator().get("searchText")?.value};break;case"indicator":e={indicator:this.$searchIndicator().get("searchText")?.value};break;default:e=new x;break}let i={wrapper:e,pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.attitudeService.findByCriteriaPaginated(i).subscribe(o=>{o.status&&(this.state.$pagingInfo.set(o.object.pagingInfo||new L),this.state.$dataList.set(o.object.dataList||[]),this.state.$totalRowCount.set(o.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoadAttitude(e){this.state.$pagingInfo.set(Se(_e({},this.$pagingInfo()),{currentPage:Math.floor(e.first/e.rows)+1,pageSize:e.rows})),this.populateList()}generateMetric(){let e=[],i=[];this.attitudeService.getMetric().subscribe(o=>{o.status&&o.object.map(l=>{e.push({value:l.id,label:l.name}),i.push(l)})}),this.state.$optionsMetricType.set(e),this.state.$descMetricType.set(i)}setSearchCategory(){this.state.$optionsCategory.set([{label:"Semua",value:null},{label:"Template",value:"template"}])}onClickSearch(){this.populateList()}onClickResetSearch(){this.$searchIndicator().patchValue({searchText:""}),this.populateList()}onRefreshSearchClicked({search:e}){this.state.$searchText.set(e),this.populateList()}static \u0275fac=function(i){return new(i||t)(u(U),u(be),u(G),u(ye),u(I),u(Ce))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var je=(t,e)=>e.field,Ae=()=>({"min-width":"50rem"}),Ne=()=>[5,10,20];function Be(t,e){t&1&&(a(0,"tr")(1,"td",13)(2,"div"),d(3,"Loading data..."),r()()())}function Oe(t,e){if(t&1&&(a(0,"th",15),d(1),r()),t&2){let i=e.$implicit;s(),v(" ",i.header," ")}}function ze(t,e){if(t&1&&(a(0,"tr"),b(1,Oe,2,1,"th",14),a(2,"th"),d(3," Action "),r()()),t&2){let i=e.$implicit;s(),p("ngForOf",i)}}function Ge(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c(2).rowIndex;s(),v(" ",i+1," ")}}function qe(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c().$implicit,o=c().$implicit;s(),T(o[i.field].name)}}function Ue(t,e){if(t&1&&(a(0,"td"),S(1,"p-dropdown",18),r()),t&2){let i=c(3);s(),p("options",i.indicatorLookupStore.$optionsMetricType())}}function He(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c().$implicit,o=c().$implicit;s(),T(o[i.field])}}function Je(t,e){if(t&1&&b(0,Ge,2,1,"td")(1,qe,2,1,"td")(2,Ue,2,1,"td")(3,He,2,1,"td"),t&2){let i,o=e.$implicit;V((i=o.field)==="no"?0:i==="assessmentCategory"?1:i==="typeAnswer"?2:3)}}function Ke(t,e){if(t&1){let i=$();a(0,"tr",16),j(1,Je,4,1,null,null,je),a(3,"td")(4,"p-button",17),g("onClick",function(){let l=f(i).$implicit,m=c();return h(m.pilih(l))}),r()()()}if(t&2){let i=e.$implicit,o=e.columns;p("pSelectableRow",i),s(),A(o)}}var Te=class t{searchOptions=[{label:"Semua",value:null},{label:"Category",value:"category"},{label:"Indicator",value:"indicator"}];indicatorLookupStore=_(R);ref=_(pe);visibleViewLookup=!1;batal(){this.ref.close()}pilih(e){this.ref.close(e)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=E({type:t,selectors:[["app-indicator-lookup"]],standalone:!0,features:[B([R]),O],decls:18,vars:14,consts:[["header",""],["body",""],[3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full","!h-full",3,"options"],[1,"col-span-9","md:col-span-9","w-full"],["pInputText","","formControlName","searchText","name","search",1,"col-span-5","md:col-span-5"],["icon","pi pi-search","label","Search",3,"onClick"],["icon","pi pi-refresh","label","Reset","severity","info",3,"onClick"],["stripedRows","","lazyLoadOnInit","false","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["label","Batal",3,"onClick"],["colspan","9",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Pilih",3,"onClick"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"options"]],template:function(i,o){if(i&1){let l=$();a(0,"p-panel",2)(1,"div",3)(2,"div",4),S(3,"p-select",5),r(),a(4,"p-inputgroup",6),S(5,"input",7),a(6,"p-inputgroup-addon")(7,"p-button",8),g("onClick",function(){return f(l),h(o.indicatorLookupStore.onClickSearch())}),r()(),a(8,"p-inputgroup-addon")(9,"p-button",9),g("onClick",function(){return f(l),h(o.indicatorLookupStore.onClickResetSearch())}),r()()()(),S(10,"br"),a(11,"p-table",10),g("onLazyLoad",function(P){return f(l),h(o.indicatorLookupStore.onLazyLoadAttitude(P))}),b(12,Be,4,0,"ng-template",11)(13,ze,4,1,"ng-template",null,0,w)(15,Ke,5,1,"ng-template",null,1,w),r(),a(17,"p-button",12),g("onClick",function(){return f(l),h(o.batal())}),r()()}if(i&2){let l=N(16);p("formGroup",o.indicatorLookupStore.$searchIndicator()),s(3),p("options",o.searchOptions),s(8),p("value",o.indicatorLookupStore.$dataList())("tableStyle",k(12,Ae))("columns",o.indicatorLookupStore.$attitudeCols())("loading",o.indicatorLookupStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",k(13,Ne))("paginatorDropdownAppendTo",l)("totalRecords",o.indicatorLookupStore.$totalRowCount())}},dependencies:[se,J,q,K,W,X,te,ie,H,oe,ne,z,ae,re,le,Y,Z]})};var he=class{id;name;technicalSkillCategoryId;categoryName;technicalSkillName;technicalSkillId;description},D=class{id;indicator="";techSkillCategory=new he;metricType=new ge},ge=class{id;name;description};var M=class t{constructor(e,i,o,l,m){this.spinnerService=e;this.technicalSkillService=i;this.messageService=o;this.confirmationService=l;this.confirmDialog=m;this.init()}fb=_(ee);state={$dataList:n([]),$dataLoading:n(!1),$pagingInfo:n(new L),$totalRowCount:n(1),$selectedData:n(null),$selectedVerified:n(!0),$loading:n(!1),$disabledTable:n(!1),$searchText:n(""),$searchBtnClickEvent:n(!1),$optionsCategory:n([]),$optionsMetricType:n([]),$metricList:n([]),$disabledUpdate:n(!0),$disabledSave:n(!0),$disabledCancel:n(!0),$formMode:n("idle")};$searchIndicator=n(this.fb.group({category:new C({value:null,disabled:!1}),searchText:new C({value:"",disabled:!1},[Q.required]),metricType:new C({value:null,disabled:!1})})).asReadonly();$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=n([{field:"no",header:"No",class_td:"!text-center",type:"number"},{field:"techSkillCategory",header:"Category",class_td:"!text-center"},{field:"indicator",header:"Indicators",class_td:"!text-center"},{field:"metricType",header:"Metrics",class_td:"!text-center"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=y(()=>{let e=new D;return this.$searchText()&&(e={noTemplate:this.$searchText()}),e});$optionsCategory=this.state.$optionsCategory.asReadonly();$optionsMetricType=this.state.$optionsMetricType.asReadonly();$metricList=this.state.$metricList.asReadonly();$disabledSave=y(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=y(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=y(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();ref;dialogOptions={modal:!0,styleClass:"w-11/12 md:w-5/12"};init(){this.setSpinner(),this.populateList(),this.generateMetric()}setSpinner(){ce(this.state.$loading).subscribe(e=>e?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let e=new D;switch(this.$searchIndicator().get("category")?.value){case"category":e={category:this.$searchIndicator().get("searchText")?.value};break;case"indicator":e={indicator:this.$searchIndicator().get("searchText")?.value};break;default:e={};break}let i={wrapper:e,pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.technicalSkillService.findTechSkillPaginated(i).subscribe(o=>{o.status&&(this.state.$pagingInfo.set(o.object.pagingInfo||new L),this.state.$dataList.set(o.object.dataList||[]),this.state.$totalRowCount.set(o.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoad(e){this.populateList()}resetState(){this.state.$dataList.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked(e){this.state.$searchText.set(e),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle")}onClickSearch(){this.populateList()}onClickResetSearch(){this.$searchIndicator().patchValue({searchText:""}),this.populateList()}generateMetric(){let e=[],i=[];this.technicalSkillService.metricTypes().subscribe(o=>{o.status&&o.object.map(l=>{e.push({value:l.id,label:l.name}),i.push(l)})}),this.state.$optionsMetricType.set(e),this.state.$metricList.set(i)}static \u0275fac=function(i){return new(i||t)(u(U),u($e),u(G),u(I),u(I))};static \u0275prov=F({token:t,factory:t.\u0275fac})};var Qe=(t,e)=>e.field,We=()=>({"min-width":"50rem"}),Xe=()=>[5,10,20];function Ye(t,e){t&1&&(a(0,"tr")(1,"td",13)(2,"div"),d(3,"Loading data..."),r()()())}function Ze(t,e){if(t&1&&(a(0,"th",15),d(1),r()),t&2){let i=e.$implicit;s(),v(" ",i.header," ")}}function et(t,e){if(t&1&&(a(0,"tr"),b(1,Ze,2,1,"th",14),a(2,"th"),d(3," Action "),r()()),t&2){let i=e.$implicit;s(),p("ngForOf",i)}}function tt(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c(2).rowIndex;s(),v(" ",i+1," ")}}function it(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c().$implicit,o=c().$implicit;s(),T(o[i.field].name)}}function ot(t,e){if(t&1&&(a(0,"td"),S(1,"p-dropdown",18),r()),t&2){let i=c(3);s(),p("options",i.toolsStore.$optionsMetricType())}}function nt(t,e){if(t&1&&(a(0,"td"),d(1),r()),t&2){let i=c().$implicit,o=c().$implicit;s(),T(o[i.field])}}function at(t,e){if(t&1&&b(0,tt,2,1,"td")(1,it,2,1,"td")(2,ot,2,1,"td")(3,nt,2,1,"td"),t&2){let i,o=e.$implicit;V((i=o.field)==="no"?0:i==="techSkillCategory"?1:i==="metricType"?2:3)}}function rt(t,e){if(t&1){let i=$();a(0,"tr",16),j(1,at,4,1,null,null,Qe),a(3,"td")(4,"p-button",17),g("onClick",function(){let l=f(i).$implicit,m=c();return h(m.pilih(l))}),r()()()}if(t&2){let i=e.$implicit,o=e.columns;p("pSelectableRow",i),s(),A(o)}}var ve=class t{searchOptions=[{label:"Semua",value:null},{label:"Category",value:"category"},{label:"Indicator",value:"indicator"}];toolsStore=_(M);ref=_(pe);visibleViewLookup=!1;batal(){this.ref.close()}pilih(e){this.ref.close(e)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=E({type:t,selectors:[["app-tools-lookup"]],standalone:!0,features:[B([M]),O],decls:18,vars:14,consts:[["header",""],["body",""],[3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full","!h-full",3,"options"],[1,"col-span-9","md:col-span-9","w-full"],["pInputText","","formControlName","searchText","name","search",1,"col-span-5","md:col-span-5"],["icon","pi pi-search","label","Search",3,"onClick"],["icon","pi pi-refresh","label","Reset","severity","info",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["label","Batal",3,"onClick"],["colspan","9",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Pilih",3,"onClick"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"options"]],template:function(i,o){if(i&1){let l=$();a(0,"p-panel",2)(1,"div",3)(2,"div",4),S(3,"p-select",5),r(),a(4,"p-inputgroup",6),S(5,"input",7),a(6,"p-inputgroup-addon")(7,"p-button",8),g("onClick",function(){return f(l),h(o.toolsStore.onClickSearch())}),r()(),a(8,"p-inputgroup-addon")(9,"p-button",9),g("onClick",function(){return f(l),h(o.toolsStore.onClickResetSearch())}),r()()()(),S(10,"br"),a(11,"p-table",10),g("onLazyLoad",function(P){return f(l),h(o.toolsStore.onLazyLoad(P))}),b(12,Ye,4,0,"ng-template",11)(13,et,4,1,"ng-template",null,0,w)(15,rt,5,1,"ng-template",null,1,w),r(),a(17,"p-button",12),g("onClick",function(){return f(l),h(o.batal())}),r()()}if(i&2){let l=N(16);p("formGroup",o.toolsStore.$searchIndicator()),s(3),p("options",o.searchOptions),s(8),p("value",o.toolsStore.$dataList())("tableStyle",k(12,We))("columns",o.toolsStore.$cols())("loading",o.toolsStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",k(13,Xe))("paginatorDropdownAppendTo",l)("totalRecords",o.toolsStore.$totalRowCount())}},dependencies:[se,J,q,K,W,X,te,ie,H,oe,ne,z,ae,re,le,Y,Z]})};export{Te as a,ve as b};
