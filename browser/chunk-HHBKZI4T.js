import{a as se,b as Te,c as Me}from"./chunk-XOKVNEWK.js";import{a as oe}from"./chunk-YLUK2ZRW.js";import{a as Ie}from"./chunk-XNS2ANDN.js";import{b as H,c as pe}from"./chunk-FO6KVJXE.js";import{K as S,e as ke,h as T,i as J,j as te,m as U,n as K,y as re}from"./chunk-RAQWMTHX.js";import{b as V,f as le}from"./chunk-R7WHARF6.js";import{p as w}from"./chunk-W6BPNARK.js";import"./chunk-4YRY4IP2.js";import"./chunk-EMVC5IJA.js";import"./chunk-AIVTLASU.js";import"./chunk-AUJU2NY4.js";import{a as Y}from"./chunk-OQKDZ6KP.js";import{b as M,e as N,f as D,h as g,l as k,m as R,o as xe}from"./chunk-3RUIS27I.js";import"./chunk-NXN4P4DR.js";import{a as Fe}from"./chunk-QASMVVIP.js";import{a as Pe}from"./chunk-BUA7TEAX.js";import{ma as we,qa as De,ua as q}from"./chunk-22342MAH.js";import{$b as C,Ab as z,Bb as a,Cb as n,Db as p,Hb as x,Ib as c,Jb as d,Qc as W,Sb as O,Tb as l,Ub as E,Vb as L,Wc as ee,Ya as s,Z as Le,_b as $e,ac as F,ca as X,da as j,fb as m,ha as b,kc as G,mc as B,nc as $,ob as v,ra as _,rb as f,sa as h,wb as I,zb as A}from"./chunk-QSF35MWG.js";var Ae=(i,t)=>t.field,ze=()=>[5,10,20];function Oe(i,t){i&1&&(a(0,"tr")(1,"td",13)(2,"div"),l(3,"Loading data..."),n()()())}function Ge(i,t){if(i&1&&(a(0,"th",15),l(1),n()),i&2){let e=t.$implicit;s(),L(" ",e.header," ")}}function Be(i,t){if(i&1&&(a(0,"tr"),v(1,Ge,2,1,"th",14),n()),i&2){let e=t.$implicit;s(),f("ngForOf",e)}}function We(i,t){if(i&1&&(a(0,"td",17),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function qe(i,t){if(i&1&&(a(0,"td"),l(1),G(2,"date"),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(B(2,1,o[e.field],"dd/MM/yyyy"))}}function Je(i,t){if(i&1&&(a(0,"td"),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function Ue(i,t){if(i&1&&v(0,We,2,1,"td",17)(1,qe,3,4,"td")(2,Je,2,1,"td"),i&2){let e=t.$implicit;I(e.format==="center"?0:e.format==="date"?1:2)}}function Ke(i,t){if(i&1&&(a(0,"tr",16),A(1,Ue,3,1,null,null,Ae),n()),i&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),z(o)}}var me=class i{projectStore=j(y);ref=j(H);onClickClose(){this.ref.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-view-lookup"]],standalone:!0,features:[C],decls:59,vars:23,consts:[["header",""],["body",""],[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-4","flex","items-center"],[1,"break-words"],[1,"col-span-6"],[1,"p-2","border","rounded-md","bg-gray-300"],[1,"col-span-2"],[1,"col-span-12","flex","mt-2","items-center"],[1,"col-span-12","mt-2"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["label","OK",3,"onClick"],["colspan","2",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[2,"text-align","center"]],template:function(e,o){if(e&1){let r=x();a(0,"div",2)(1,"div",3)(2,"p",4),l(3,"Project Name"),n()(),a(4,"div",5)(5,"p",6),l(6),n()(),p(7,"div",7),a(8,"div",3)(9,"p",4),l(10,"Project Manager"),p(11,"br"),l(12,"/ Penanggung Jawab"),n()(),a(13,"div",5)(14,"p",6),l(15),n()(),p(16,"div",7),a(17,"div",3)(18,"p",4),l(19,"Team Leader"),n()(),a(20,"div",5)(21,"p",6),l(22),n()(),p(23,"div",7),a(24,"div",3)(25,"p",4),l(26,"Start Date"),n()(),a(27,"div",5)(28,"p",6),l(29),G(30,"date"),n()(),p(31,"div",7),a(32,"div",3)(33,"p",4),l(34,"End Date"),n()(),a(35,"div",5)(36,"p",6),l(37),G(38,"date"),n()(),p(39,"div",7),a(40,"div",3)(41,"p",4),l(42,"Total of Member"),n()(),a(43,"div",5)(44,"p",6),l(45),n()(),p(46,"div",7),a(47,"div",8)(48,"p",4),l(49,"Member"),n()(),a(50,"div",9)(51,"p-table",10),c("onLazyLoad",function(P){return _(r),h(o.projectStore.onLazyLoadLookup(P))}),v(52,Oe,4,0,"ng-template",11)(53,Be,2,1,"ng-template",null,0,$)(55,Ke,3,1,"ng-template",null,1,$),n()(),a(57,"div")(58,"p-button",12),c("onClick",function(){return _(r),h(o.onClickClose())}),n()()()}if(e&2){let r,u,P,Ce,Se,Ee,Ve=O(56);f("formGroup",o.projectStore.$viewForm()),s(6),L(" ",(r=o.projectStore.$viewForm().get("projectName"))==null?null:r.value," "),s(9),L(" ",(u=o.projectStore.$viewForm().get("projectManager"))==null?null:u.value," "),s(7),L(" ",(P=o.projectStore.$viewForm().get("teamLeader"))==null?null:P.value," "),s(7),L(" ",B(30,16,(Ce=o.projectStore.$viewForm().get("startDate"))==null?null:Ce.value,"dd/MM/yyyy")," "),s(8),L(" ",B(38,19,(Se=o.projectStore.$viewForm().get("endDate"))==null?null:Se.value,"dd/MM/yyyy")," "),s(8),L(" ",(Ee=o.projectStore.$viewForm().get("totalMember"))==null?null:Ee.value," "),s(6),f("value",o.projectStore.$dataLookupEmpList())("columns",o.projectStore.$colsEmployeeLookup())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",F(22,ze))("paginatorDropdownAppendTo",Ve)("totalRecords",o.projectStore.$totalLookupRowCount())}},dependencies:[S,q,D,w,U,K,W,k,ee]})};var He=(i,t)=>t.field,Qe=()=>({"min-width":"50rem"}),Xe=()=>[5,10,20];function Ye(i,t){i&1&&(a(0,"tr")(1,"td",14)(2,"div"),l(3,"Loading data..."),n()()())}function Ze(i,t){if(i&1&&(a(0,"th",16),l(1),n()),i&2){let e=t.$implicit;s(),L(" ",e.header," ")}}function et(i,t){if(i&1&&(a(0,"tr"),v(1,Ze,2,1,"th",15),a(2,"th"),l(3," Action "),n()()),i&2){let e=t.$implicit;s(),f("ngForOf",e)}}function tt(i,t){if(i&1&&(a(0,"td",19),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function ot(i,t){if(i&1&&(a(0,"td"),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function it(i,t){if(i&1&&v(0,tt,2,1,"td",19)(1,ot,2,1,"td"),i&2){let e=t.$implicit;I(e.format==="center"?0:1)}}function at(i,t){if(i&1){let e=x();a(0,"tr",17),A(1,it,2,1,null,null,He),a(3,"td")(4,"p-button",18),c("onClick",function(){let r=_(e).$implicit,u=d();return h(u.pilih(r))}),n()()()}if(i&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),z(o)}}var de=class i{projectStore=j(y);ref=j(H);visibleViewLookup=!1;batal(){this.ref.close()}pilih(t){this.ref.close(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-employee-lookup"]],standalone:!0,features:[C],decls:18,vars:14,consts:[["header",""],["body",""],["header","Project List"],[1,"grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-2"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-7"],["type","text","pInputText","","formControlName","searchText",1,"w-full"],[1,"col-span-1"],["label","Search",3,"onClick"],["label","Reset",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["label","Batal",3,"onClick"],["colspan","9",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Pilih",3,"onClick"],[2,"text-align","center"]],template:function(e,o){if(e&1){let r=x();a(0,"p-panel",2)(1,"div",3)(2,"div",4),p(3,"p-select",5),n(),a(4,"div",6),p(5,"input",7),n(),a(6,"div",8)(7,"p-button",9),c("onClick",function(){return _(r),h(o.projectStore.onClickSearch())}),n()(),a(8,"div",8)(9,"p-button",10),c("onClick",function(){return _(r),h(o.projectStore.onClickResetSearch())}),n()()(),p(10,"br"),a(11,"p-table",11),c("onLazyLoad",function(P){return _(r),h(o.projectStore.onLazyLoadEmployee(P))}),v(12,Ye,4,0,"ng-template",12)(13,et,4,1,"ng-template",null,0,$)(15,at,5,1,"ng-template",null,1,$),n(),a(17,"p-button",13),c("onClick",function(){return _(r),h(o.batal())}),n()()}if(e&2){let r=O(16);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategoryEmployeeList()),s(8),f("value",o.projectStore.$dataListEmployee())("tableStyle",F(12,Qe))("columns",o.projectStore.$colsEmployee())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",F(13,Xe))("paginatorDropdownAppendTo",r)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[S,T,q,M,N,D,V,J,w,U,K,W,k,R]})};var ne=class i{projectStore=j(y);ref=j(H);onClickSave(){this.ref.close(!0)}onClickCancel(){this.projectStore.$projectEditDetailAddLookupForm().reset(),this.ref.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-edit-detail-add-lookup"]],standalone:!0,features:[C],decls:42,vars:4,consts:[[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex"],[1,"break-words"],[1,"col-span-6"],["type","text","pInputText","","formControlName","memberName",1,"w-full","p-2","border","rounded-md"],[1,"col-span-1"],["icon","pi pi-search",3,"onClick"],[1,"col-span-3"],["formControlName","department","id","position","name","position","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],[1,"col-span-4"],["formControlName","position","id","position","name","position","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],["formControlName","level","id","level","name","level","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],["label","save",3,"onClick"],["label","cancel",3,"onClick"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"p",2),l(3,"Member Name"),n()(),a(4,"div",3),p(5,"input",4),n(),a(6,"div",5)(7,"p-button",6),c("onClick",function(){return o.projectStore.onClickLookupTeamLeader("member")}),n()(),p(8,"div",7),a(9,"div",1)(10,"p",2),l(11,"Department"),n()(),a(12,"div",3),p(13,"p-select",8),n(),p(14,"div",9),a(15,"div",1)(16,"p",2),l(17,"Position"),n()(),a(18,"div",3),p(19,"p-select",10),n(),p(20,"div",9),a(21,"div",1)(22,"p",2),l(23,"Level"),n()(),a(24,"div",3),p(25,"p-select",11),n(),p(26,"div",9),a(27,"div",1)(28,"p",2),l(29,"Start Date"),n()(),a(30,"div",3),p(31,"p-datepicker",12),n(),p(32,"div",9),a(33,"div",1)(34,"p",2),l(35,"End Date"),n()(),a(36,"div",3),p(37,"p-datepicker",13),n(),p(38,"div",9)(39,"br"),a(40,"p-button",14),c("onClick",function(){return o.onClickSave()}),n(),a(41,"p-button",15),c("onClick",function(){return o.onClickCancel()}),n()()),e&2&&(f("formGroup",o.projectStore.$projectEditDetailAddLookupForm()),s(13),f("options",o.projectStore.$optionDepartment()),s(6),f("options",o.projectStore.$optionPosition()),s(6),f("options",o.projectStore.$optionLevel()))},dependencies:[S,M,N,D,V,J,w,te,k,R]})};var y=class i{constructor(t,e,o,r,u,P){this.spinnerService=t;this.projectService=e;this.dialogService=o;this.employeeService=r;this.messageService=u;this.confirmationService=P;this.setSpinner(),this.setSearchCategory()}fb=j(xe);state={$dataList:m([]),$dataLookupEmpList:m([]),$dataLoading:m(!1),$selectedData:m(null),$loading:m(!1),$pagingInfo:m(new Y),$pagingInfoLookup:m(new Y),$projectWrapper:m(null),$totalRowCount:m(0),$totalLookupRowCount:m(0),$searchOptions:m([]),$searchOptionsEmployee:m([]),$disabledAdd:m(!1),$disabledEdit:m(!0),$disabledSave:m(!0),$disabledDelete:m(!0),$formMode:m("home"),$employeeWrapper:m(null),$dataListEmployee:m([]),$dataListLookupEmployee:m([]),$selectDataEmployee:m(null),$optionDepartment:m([]),$optionPosition:m([]),$optionLevel:m([]),$selectedIdProject:m(-99)};$dataList=this.state.$dataList.asReadonly();$dataLookupEmpList=this.state.$dataLookupEmpList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$pagingInfoLookup=this.state.$pagingInfoLookup.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$totalLookupRowCount=this.state.$totalLookupRowCount.asReadonly();$cols=m([{field:"projectName",header:"Project Name"},{field:"projectManager",header:"Project Manager"},{field:"teamLeadId",header:"Team Leader"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"},{field:"totalMember",header:"Total Member",format:"center"}]).asReadonly();$projectWrapper=this.state.$projectWrapper.asReadonly();$selectData=this.state.$selectedData.asReadonly();$optionsCategory=this.state.$searchOptions.asReadonly();$optionsCategoryEmployeeList=this.state.$searchOptionsEmployee.asReadonly();$searchForm=m(this.fb.group({category:new g({value:null,disabled:!1}),searchText:new g({value:"",disabled:!1}),startDate:new g({value:null,disabled:!1}),endDate:new g({value:null,disabled:!1})}));$viewForm=m(this.fb.group({projectName:new g({value:"",disabled:!0}),projectManager:new g({value:"",disabled:!0}),teamLeader:new g({value:"",disabled:!0}),totalMember:new g({value:0,disabled:!0}),employeeList:new g({value:[],disabled:!0}),startDate:new g({value:null,disabled:!1}),endDate:new g({value:null,disabled:!1})}));$projectEditDetailForm=m(this.fb.group({projectName:new g({value:"",disabled:!1}),projectId:new g({value:null,disabled:!0}),projectManager:new g({value:"",disabled:!0}),projectManagerId:new g({value:"",disabled:!0}),teamLeader:new g({value:"",disabled:!0}),teamLeaderId:new g({value:"",disabled:!0}),totalMember:new g({value:0,disabled:!0}),startDate:new g({value:null,disabled:!1}),endDate:new g({value:null,disabled:!1})})).asReadonly();$projectEditDetailAddLookupForm=m(this.fb.group({noEmployee:new g({value:"",disabled:!0}),memberName:new g({value:"",disabled:!0}),department:new g({value:"",disabled:!1}),position:new g({value:"",disabled:!1}),level:new g({value:"",disabled:!1}),startDate:new g({value:null,disabled:!1}),endDate:new g({value:null,disabled:!1})})).asReadonly();$projectEditListForm=m(this.fb.group({startDate:new g({value:null,disabled:!1}),endDate:new g({value:null,disabled:!1})})).asReadonly();$colsEditList=m([{field:"employeeId",header:"Employee ID"},{field:"fullName",header:"Name"},{field:"departmentDescription",header:"Department"},{field:"positionDescription",header:"Position"},{field:"levelDescription",header:"Level"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"}]).asReadonly();$disabledAdd=this.state.$disabledAdd.asReadonly();$disabledEdit=this.state.$disabledEdit.asReadonly();$disabledSave=this.state.$disabledSave.asReadonly();$disabledDelete=this.state.$disabledDelete.asReadonly();$formMode=this.state.$formMode.asReadonly();$dataListEmployee=this.state.$dataListEmployee.asReadonly();$colsEmployee=m([{field:"noEmployee",header:"No Employee"},{field:"fullName",header:"Name"},{field:"directorateDescription",header:"Directorate"},{field:"divisionDescription",header:"Division"},{field:"departmentDescription",header:"Department"},{field:"positionDescription",header:"Position"},{field:"unitDescription",header:"Unit"},{field:"levelDescription",header:"Level"}]).asReadonly();$selectedDataEmployee=this.state.$selectDataEmployee.asReadonly();$optionDepartment=this.state.$optionDepartment.asReadonly();$optionPosition=this.state.$optionPosition.asReadonly();$optionLevel=this.state.$optionLevel.asReadonly();ref;$colsEmployeeLookup=m([{field:"noEmployee",header:"Employee"},{field:"fullName",header:"Name"}]).asReadonly();setSpinner(){Fe(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}onLazyLoad(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateList()}onLazyLoadLookup(t){let e=this.state.$pagingInfoLookup();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfoLookup.set(e),this.findProjectAndEmployeesPaginated()}populateList(t){this.state.$dataLoading.set(!0);let e=t||new se;this.state.$dataList.set([]),this.state.$formMode()==="home"?this.findByCriteriaPaginated(e):this.state.$formMode()==="edit"?(this.state.$selectedData()&&this.state.$selectedData()?.id&&(e.id=this.state.$selectedData()?.id,this.findEmployeeByProjectId(e)),this.state.$dataLoading.set(!1)):this.state.$formMode()==="new"&&(this.state.$dataLoading.set(!1),this.state.$pagingInfo.set(new Y),this.state.$totalRowCount.set(0),this.state.$dataList.set([]))}findProjectById(t){this.projectService.findProjectById(t).subscribe(e=>{if(e.status){this.$viewForm().patchValue({projectName:e.object.projectName});let o=new Date(e.object.startDate),r=new Date(e.object.endDate);this.$projectEditDetailForm().patchValue({projectName:e.object.projectName,projectManager:e.object.projectManager,projectManagerId:e.object.projectManager,totalMember:e.object.totalMember,teamLeader:e.object.teamLeadId,teamLeaderId:e.object.teamLeadId,projectId:e.object.id,startDate:e.object.startDate?o:null,endDate:e.object.endDate?r:null})}this.setFormMode("edit")})}findEmployeeByProjectId(t){let o={wrapper:{projectId:t.id,noEmployee:t.noEmployee,fullName:t.fullName,positionName:t.positionName,startEmpDate:t.startDate,endEmpDate:t.endDate},pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.employeeService.findEmployeeByProjectId(o).subscribe(r=>{r.status&&(this.state.$pagingInfo.set(r.object.pagingInfo),this.state.$totalRowCount.set(r.object.totalRowCount),this.state.$dataList.set(r.object.dataList))})}findByCriteriaPaginated(t){this.projectService.findByCriteriaPaginated(t,this.state.$pagingInfo()).subscribe({next:e=>{e.status&&(this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount),this.state.$dataList.set(e.object.dataList)),this.state.$dataLoading.set(!1)},error:e=>{this.state.$dataLoading.set(!1),this.messageService.add({severity:"error",summary:e,detail:"Error"})},complete:()=>{this.state.$dataLoading.set(!1)}})}setSearchCategory(){this.state.$searchOptions.set([{label:"Semua",value:null},{label:"Project Name",value:"projectName"},{label:"Project Manager",value:"projectManager"}])}setSearchCategoryEmployee(){this.state.$searchOptionsEmployee.set([{label:"Semua",value:null},{label:"Employee ID",value:"noEmployee"},{label:"Name",value:"fullName"},{label:"Position",value:"positionDescription"}])}onClickSearch(){let t=new se;this.$searchForm()?.value?.category==="projectName"?t.projectName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="projectManager"?t.projectManager=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="noEmployee"?t.noEmployee=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="fullName"?t.fullName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="positionDescription"&&(t.positionName=this.$searchForm().value.searchText),this.$searchForm()?.value?.startDate&&(t.startDate=this.$searchForm()?.value?.startDate),this.$searchForm()?.value?.endDate&&(t.endDate=this.$searchForm()?.value?.endDate),this.populateList(t)}onClickResetSearch(){this.$searchForm().reset()}onClickAddProject(){this.state.$formMode.set("new")}resetForm(t){let e=this.$projectEditDetailForm();t.forEach(o=>{e.get(o)?.reset(),e.get(o)?.disable()})}resetAllForm(){this.$projectEditDetailForm().reset({projectName:"",projectManager:"",teamLeader:null,totalMember:0})}setFormMode(t){this.state.$formMode.set(t)}onClickEdit(t){this.state.$selectedData.set(t),this.state.$pagingInfo.set(new Y),this.findProjectById(t.id)}onClickView(t){this.state.$selectedIdProject.set(t.id),this.state.$pagingInfoLookup.set(new Y),this.openViewLookup()}openViewLookup(){this.ref=this.dialogService.open(me,{modal:!0,header:"Project Detail",width:"50vw"}),this.ref.onClose.subscribe(t=>{})}findProjectAndEmployees(t,e){if(e==="view"){let o=this.state.$pagingInfo();o.retrieveAll=!0,this.state.$pagingInfo.set(o)}this.projectService.findProjectAndEmployees(t).subscribe(o=>{if(o.status){let r=o.object;if(e==="view"){this.$viewForm().patchValue({projectName:r.projectName,projectManager:r.projectManager,teamLeader:r.teamLeadName,totalMember:r.totalMember,employeeList:r.employeePaginatedListResponse.dataList});let u=this.state.$pagingInfo();u.retrieveAll=!1,this.state.$pagingInfo.set(u),this.openViewLookup()}else e==="edit"&&(this.$projectEditDetailForm().patchValue({projectName:r.projectName,projectManager:r.projectManager,teamLeader:r.teamLeadName,totalMember:r.totalMember}),this.state.$dataList.set(o.object.employeePaginatedListResponse.dataList),this.state.$pagingInfo.set(o.object.pagingInfo),this.state.$totalRowCount.set(o.object.totalRowCount),this.setFormMode("edit"))}this.state.$dataLoading.set(!1)},o=>{this.state.$dataLoading.set(!1),this.messageService.add({severity:"error",summary:o,detail:"Error"})})}findProjectAndEmployeesPaginated(){this.state.$dataLoading.set(!0);let t=new Te,e=this.state.$pagingInfoLookup();this.state.$pagingInfoLookup.set(e),t.id=this.state.$selectedIdProject(),t.pagingInfo=e,this.projectService.findProjectAndEmployeesPaginated(t).subscribe(o=>{if(o.status){let r=o.object;this.state.$dataLookupEmpList.set(r.employeePaginatedListResponse.dataList),this.state.$pagingInfoLookup.set(r.employeePaginatedListResponse.pagingInfo),this.state.$totalLookupRowCount.set(r.employeePaginatedListResponse.totalRowCount),this.$viewForm().patchValue({projectName:r.projectName,projectManager:r.projectManager,teamLeader:r.teamLeadId,totalMember:r.totalMember,employeeList:r.employeePaginatedListResponse.dataList,startDate:r.startDate?new Date(r.startDate):r.startDate,endDate:r.endEmpDate?new Date(r.endEmpDate):r.endEmpDate})}this.state.$dataLoading.set(!1)},o=>{this.state.$dataLoading.set(!1),this.messageService.add({severity:"error",summary:o,detail:"Error"})}),this.state.$dataLookupEmpList.set([])}onClickLookupTeamLeader(t){this.getEmployeeList(),this.ref=this.dialogService.open(de,{header:"Employee List",modal:!0}),this.ref.onClose.subscribe(e=>{this.$searchForm().reset(),e&&(t==="projectManager"?this.$projectEditDetailForm().patchValue({projectManager:e.fullName,projectManagerId:e.noEmployee}):t==="teamLeader"?this.$projectEditDetailForm().patchValue({teamLeader:e.fullName,teamLeaderId:e.noEmployee}):this.$projectEditDetailAddLookupForm().patchValue({memberName:e.fullName,noEmployee:e.noEmployee}))})}getEmployeeList(){this.state.$dataListEmployee.set([]),this.state.$dataLoading.set(!0);let t={wrapper:this.state.$employeeWrapper(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.employeeService.getEmployeeList(t).subscribe(e=>{if(e.status){let o=e.object.dataList;this.state.$dataListEmployee.set(o),this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount||0)}this.state.$dataLoading.set(!1)},e=>{this.messageService.add({severity:"error",summary:e,detail:"Error"})})}populateListEmployee(t){this.state.$dataLoading.set(!0);let e=t||new oe;this.state.$employeeWrapper.set(e),this.getEmployeeList()}onLazyLoadEmployee(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateListEmployee()}onClickAddMember(){this.$projectEditDetailAddLookupForm().reset(),this.ref=this.dialogService.open(ne,{header:"Add Member",modal:!0}),this.ref.onClose.subscribe(t=>{if(t){let e=new oe;e.employeeId=this.$projectEditDetailAddLookupForm().get("noEmployee")?.value,e.employeeName=this.$projectEditDetailAddLookupForm().get("memberName")?.value,e.projectId=this.$projectEditDetailForm().get("projectId")?.value,e.departmentId=this.$projectEditDetailAddLookupForm().get("department")?.value,e.positionId=this.$projectEditDetailAddLookupForm().get("position")?.value,e.levelId=this.$projectEditDetailAddLookupForm().get("level")?.value,e.startEmpDate=this.$projectEditDetailAddLookupForm().get("startDate")?.value,e.endEmpDate=this.$projectEditDetailAddLookupForm().get("endDate")?.value,this.employeeService.updateProject(e).subscribe(o=>{o.status&&(this.populateList(),this.messageService.add({severity:"success",summary:o.object,detail:"Success"}))},o=>{this.messageService.add({severity:"error",summary:o,detail:"Error"})})}})}onClickSaveProject(){this.spinnerService.show();let t=new se;t.id=this.$projectEditDetailForm().get("projectId")?.value,t.projectName=this.$projectEditDetailForm().get("projectName")?.value,t.projectManager=this.$projectEditDetailForm().get("projectManagerId")?.value,t.teamLeadId=this.$projectEditDetailForm().get("teamLeaderId")?.value,t.startDate=this.$projectEditDetailForm().get("startDate")?.value,t.endDate=this.$projectEditDetailForm().get("endDate")?.value,this.projectService.save(t).subscribe(e=>{e.status&&(this.$projectEditDetailForm().patchValue({projectId:e.object.id,projectName:e.object.projectName,projectManagerId:e.object.projectManagerId,teamLeaderId:e.object.teamLeaderId,startDate:e.object.startDate?new Date(e.object.startDate):null,endDate:e.object.endDate?new Date(e.object.endDate):null}),this.populateList(),this.messageService.add({severity:"success",summary:e.status.message,detail:"Success to save project."}))},e=>{this.messageService.add({severity:"error",summary:e,detail:"Error"})},()=>this.spinnerService.hide())}onClickBack(){this.setFormMode("home"),this.state.$pagingInfo.set(new Y),this.$projectEditDetailForm().reset()}setOptionDepartment(){this.employeeService.getDepartmentList().subscribe(t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionDepartment.set(e)}},t=>{this.messageService.add({severity:"error",summary:t,detail:"Error"})})}setOptionPosition(){this.employeeService.getPositionRoleList().subscribe({next:t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionPosition.set(e)}},error:t=>{this.messageService.add({severity:"error",summary:t,detail:"Error"})}})}setOptionLevel(){this.employeeService.getLevelList().subscribe(t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionLevel.set(e)}},t=>{this.messageService.add({severity:"error",summary:t,detail:"Error"})})}onClickEditMember(t){this.$projectEditDetailAddLookupForm().reset(),this.$projectEditDetailAddLookupForm().patchValue({noEmployee:t.employeeId,memberName:t.fullName,position:t.positionId,level:t.levelId,department:t.departmentId,startDate:t.startDate?new Date(t.startDate):t.startDate,endDate:t.endDate?new Date(t.endDate):t.endDate}),this.ref=this.dialogService.open(ne,{header:"Edit Member",modal:!0}),this.ref.onClose.subscribe(e=>{if(e){this.spinnerService.show();let o=new oe;o.employeeId=this.$projectEditDetailAddLookupForm().get("noEmployee")?.value,o.employeeName=this.$projectEditDetailAddLookupForm().get("memberName")?.value,o.projectId=this.$projectEditDetailForm().get("projectId")?.value,o.departmentId=this.$projectEditDetailAddLookupForm().get("department")?.value,o.positionId=this.$projectEditDetailAddLookupForm().get("position")?.value,o.levelId=this.$projectEditDetailAddLookupForm().get("level")?.value,o.startEmpDate=this.$projectEditDetailAddLookupForm().get("startDate")?.value,o.endEmpDate=this.$projectEditDetailAddLookupForm().get("endDate")?.value,this.employeeService.updateMappingEmp(o).subscribe({next:r=>{r.status&&this.populateList(),this.messageService.add({severity:"success",summary:r.status.message,detail:"Success to save project."})},error:r=>{this.messageService.add({severity:"error",summary:r,detail:"Error"})},complete:()=>{this.spinnerService.hide()}})}})}onClickDeleteMember(t){this.confirmationService.confirm({message:"Are you sure you want to delete this member?",header:"Delete Confirmation",accept:()=>{this.deleteMapping(t)}})}deleteMapping(t){this.spinnerService.show();let e=new oe;e.employeeId=t.employeeId,e.projectId=this.$projectEditDetailForm().get("projectId")?.value,this.projectService.deleteMapping(e).subscribe({next:o=>{o.status&&(this.messageService.add({severity:"success",summary:o.object,detail:"Success"}),this.populateList())},error:o=>{this.messageService.add({severity:"error",summary:o,detail:"Error"})},complete:()=>{this.spinnerService.hide()}})}static \u0275fac=function(e){return new(e||i)(X(Pe),X(Me),X(pe),X(Ie),X(De),X(we))};static \u0275prov=Le({token:i,factory:i.\u0275fac})};var lt=(i,t)=>t.field,pt=()=>({"min-width":"50rem"}),st=()=>[5,10,20];function mt(i,t){i&1&&(a(0,"tr")(1,"td",16)(2,"div"),l(3,"Loading data..."),n()()())}function ct(i,t){if(i&1&&(a(0,"th",18),l(1),n()),i&2){let e=t.$implicit;s(),L(" ",e.header," ")}}function dt(i,t){if(i&1&&(a(0,"tr"),v(1,ct,2,1,"th",17),a(2,"th"),l(3," Action "),n()()),i&2){let e=t.$implicit;s(),f("ngForOf",e)}}function ut(i,t){if(i&1&&(a(0,"td",23),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function ft(i,t){if(i&1&&(a(0,"td"),l(1),G(2,"date"),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(B(2,1,o[e.field],"dd/MM/yyyy"))}}function gt(i,t){if(i&1&&(a(0,"td"),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function _t(i,t){if(i&1&&v(0,ut,2,1,"td",23)(1,ft,3,4,"td")(2,gt,2,1,"td"),i&2){let e=t.$implicit;I(e.format==="center"?0:e.format==="date"?1:2)}}function ht(i,t){if(i&1){let e=x();a(0,"tr",19),A(1,_t,3,1,null,null,lt),a(3,"td",20)(4,"p-button",21),c("onClick",function(){let r=_(e).$implicit,u=d();return h(u.projectStore.onClickEdit(r))}),n(),a(5,"p-button",22),c("onClick",function(){let r=_(e).$implicit,u=d();return h(u.projectStore.onClickView(r))}),n()()()}if(i&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),z(o)}}var ge=class i{projectStore=j(y);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-list"]],standalone:!0,features:[C],decls:22,vars:14,consts:[["header",""],["body",""],["header","Project List"],[1,"appraisal-search","grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-10"],[1,"col-span-2","flex","justify-end","space-x-1"],["label","Add Project","icon","pi pi-plus","severity","contrast",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","7",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[1,"gap-2","flex","justify-center"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Edit",3,"onClick"],["styleClass","p-button-contrast","icon","pi pi-eye","pTooltip","View",3,"onClick"],[2,"text-align","center"]],template:function(e,o){if(e&1){let r=x();a(0,"p-panel",2)(1,"div",3)(2,"div",4),p(3,"p-select",5),n(),a(4,"p-inputgroup",6),p(5,"input",7),a(6,"p-inputgroup-addon")(7,"p-button",8),c("onClick",function(){return _(r),h(o.projectStore.onClickSearch())}),n()(),a(8,"p-inputgroup-addon")(9,"p-button",9),c("onClick",function(){return _(r),h(o.projectStore.onClickResetSearch())}),n()()()(),p(10,"br"),a(11,"div",10),p(12,"div",11),a(13,"div",12)(14,"p-button",13),c("onClick",function(){return _(r),h(o.projectStore.onClickAddProject())}),n()()(),p(15,"br"),a(16,"p-table",14),c("onLazyLoad",function(P){return _(r),h(o.projectStore.onLazyLoad(P))}),v(17,mt,4,0,"ng-template",15)(18,dt,4,1,"ng-template",null,0,$)(20,ht,6,1,"ng-template",null,1,$),n()()}if(e&2){let r=O(21);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategory()),s(13),f("value",o.projectStore.$dataList())("tableStyle",F(12,pt))("columns",o.projectStore.$cols())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",F(13,st))("paginatorDropdownAppendTo",r)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[S,T,q,M,N,D,V,J,w,U,K,W,ke,re,le,k,R,ee]})};var _e=class i{projectStore=j(y);onResetClick(){this.projectStore.resetAllForm()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-edit-detail"]],standalone:!0,features:[C],decls:45,vars:1,consts:[["header","Project Detail"],[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex"],[1,"break-words"],[1,"col-span-6"],["type","text","pInputText","","formControlName","projectName",1,"w-full","p-2","border","rounded-md"],[1,"col-span-4"],["type","text","pInputText","","formControlName","projectManager",1,"w-full","p-2","border","rounded-md"],[1,"col-span-1"],["icon","pi pi-search",3,"onClick"],[1,"col-span-3"],["type","text","pInputText","","formControlName","teamLeader",1,"w-full","p-2","border","rounded-md"],["type","text","pInputText","","formControlName","totalMember",1,"w-full","p-2","border","rounded-md"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],[1,"flex","justify-end","space-x-1"],["label","Save","icon","pi pi-check","severity","success",3,"onClick"],["label","Back","icon","pi pi-sign-out","severity","danger",3,"onClick"]],template:function(e,o){e&1&&(a(0,"p-panel",0)(1,"div",1)(2,"div",2)(3,"p",3),l(4,"Project Name"),n()(),a(5,"div",4),p(6,"input",5),n(),p(7,"div",6),a(8,"div",2)(9,"p",3),l(10,"Project Manager /"),p(11,"br"),l(12,"Penanggung Jawab"),n()(),a(13,"div",4),p(14,"input",7),n(),a(15,"div",8)(16,"p-button",9),c("onClick",function(){return o.projectStore.onClickLookupTeamLeader("projectManager")}),n()(),p(17,"div",10),a(18,"div",2)(19,"p",3),l(20,"Team Leader"),n()(),a(21,"div",4),p(22,"input",11),n(),a(23,"div",8)(24,"p-button",9),c("onClick",function(){return o.projectStore.onClickLookupTeamLeader("teamLeader")}),n()(),p(25,"div",10),a(26,"div",2)(27,"p",3),l(28,"Total of Member"),n()(),a(29,"div",4),p(30,"input",12),n(),p(31,"div",6),a(32,"div",2)(33,"p",3),l(34,"Start Date"),n()(),a(35,"div",10),p(36,"p-datepicker",13),n(),a(37,"div",8)(38,"p",3),l(39,"End Date"),n()(),a(40,"div",10),p(41,"p-datepicker",14),n()(),a(42,"div",15)(43,"p-button",16),c("onClick",function(){return o.projectStore.onClickSaveProject()}),n(),a(44,"p-button",17),c("onClick",function(){return o.projectStore.onClickBack()}),n()()()),e&2&&(s(),f("formGroup",o.projectStore.$projectEditDetailForm()))},dependencies:[S,T,M,N,D,V,w,te,k,R]})};var jt=(i,t)=>t.field,yt=()=>({"min-width":"50rem"}),vt=()=>[5,10,20];function bt(i,t){i&1&&(a(0,"tr")(1,"td",20)(2,"div"),l(3,"Loading data..."),n()()())}function Ct(i,t){if(i&1&&(a(0,"th",23),l(1),n()),i&2){let e=t.$implicit;s(),L(" ",e.header," ")}}function St(i,t){if(i&1&&(a(0,"tr"),v(1,Ct,2,1,"th",21),a(2,"th",22),l(3," Action "),n()()),i&2){let e=t.$implicit;s(),f("ngForOf",e)}}function Et(i,t){if(i&1&&(a(0,"td",22),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function Lt(i,t){if(i&1&&(a(0,"td"),l(1),G(2,"date"),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(B(2,1,o[e.field],"dd/MM/yyyy"))}}function $t(i,t){if(i&1&&(a(0,"td"),l(1),n()),i&2){let e=d().$implicit,o=d().$implicit;s(),E(o[e.field])}}function wt(i,t){if(i&1&&v(0,Et,2,1,"td",22)(1,Lt,3,4,"td")(2,$t,2,1,"td"),i&2){let e=t.$implicit;I(e.format==="center"?0:e.format==="date"?1:2)}}function Dt(i,t){if(i&1){let e=x();a(0,"tr",24),A(1,wt,3,1,null,null,jt),a(3,"td",25)(4,"p-button",26),c("onClick",function(){let r=_(e).$implicit,u=d();return h(u.projectStore.onClickEditMember(r))}),n(),l(5," \xA0 "),a(6,"p-button",27),c("onClick",function(){let r=_(e).$implicit,u=d();return h(u.projectStore.onClickDeleteMember(r))}),n()()()}if(i&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),z(o)}}var he=class i{projectStore=j(y);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-edit-list"]],standalone:!0,features:[C],decls:32,vars:15,consts:[["header",""],["body",""],["header","Project List"],[1,"appraisal-search","grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],[1,"col-span-1"],[1,"break-words"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-10"],[1,"col-span-2","flex","justify-end","space-x-1"],["icon","pi pi-plus","label","Add Member","severity","contrast",3,"onClick"],["stripedRows","","showGridlines","","selectionMode","single",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","selection","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","11",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"!text-center"],[3,"pSelectableRow"],["width","20%",2,"text-align","center"],["label","Edit",3,"onClick"],["label","Delete","severity","danger",3,"onClick"]],template:function(e,o){if(e&1){let r=x();a(0,"p-panel",2)(1,"div",3)(2,"div",4),p(3,"p-select",5),n(),a(4,"p-inputgroup",6),p(5,"input",7),a(6,"p-inputgroup-addon")(7,"p-button",8),c("onClick",function(){return _(r),h(o.projectStore.onClickSearch())}),n()(),a(8,"p-inputgroup-addon")(9,"p-button",9),c("onClick",function(){return _(r),h(o.projectStore.onClickResetSearch())}),n()()(),a(10,"div",10)(11,"p",11),l(12,"Start Date"),n()(),a(13,"div",4),p(14,"p-datepicker",12),n(),a(15,"div",10)(16,"p",11),l(17,"End Date"),n()(),a(18,"div",4),p(19,"p-datepicker",13),n()(),p(20,"br"),a(21,"div",14),p(22,"div",15),a(23,"div",16)(24,"p-button",17),c("onClick",function(){return _(r),h(o.projectStore.onClickAddMember())}),n()()(),p(25,"br"),a(26,"p-table",18),c("onLazyLoad",function(P){return _(r),h(o.projectStore.onLazyLoad(P))}),v(27,bt,4,0,"ng-template",19)(28,St,4,1,"ng-template",null,0,$)(30,Dt,7,1,"ng-template",null,1,$),n()()}if(e&2){let r=O(31);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategoryEmployeeList()),s(23),f("value",o.projectStore.$dataList())("tableStyle",F(13,yt))("columns",o.projectStore.$colsEditList())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("selection",o.projectStore.$selectedDataEmployee())("rows",5)("rowsPerPageOptions",F(14,vt))("paginatorDropdownAppendTo",r)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[S,T,q,M,N,D,V,J,w,U,K,W,re,le,te,k,R,ee]})};var je=class i{projectStore=j(y);ngOnInit(){this.projectStore.setSearchCategoryEmployee(),this.projectStore.setOptionDepartment(),this.projectStore.setOptionLevel(),this.projectStore.setOptionPosition()}onResetClick(){this.projectStore.resetAllForm()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-project-edit"]],standalone:!0,features:[C],decls:3,vars:0,template:function(e,o){e&1&&p(0,"app-project-edit-detail")(1,"br")(2,"app-project-edit-list")},dependencies:[S,_e,he]})};function kt(i,t){i&1&&p(0,"app-project-list")}function Pt(i,t){i&1&&p(0,"app-project-edit")}var Re=class i{projectStore=j(y);constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-employee"]],standalone:!0,features:[$e([y,pe,H]),C],decls:4,vars:1,consts:[["header","Project Mapping"],[1,"mt-6"]],template:function(e,o){e&1&&(a(0,"p-panel",0)(1,"div",1),v(2,kt,1,0,"app-project-list")(3,Pt,1,0,"app-project-edit"),n()()),e&2&&(s(2),I(o.projectStore.$formMode()==="home"?2:3))},dependencies:[S,T,ge,je]})};export{Re as ProjectComponent};
