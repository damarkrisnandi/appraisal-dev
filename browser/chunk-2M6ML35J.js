import{a as ye}from"./chunk-AQOF2ETN.js";import{A as ke,C as _e,M as $,g as B,j as ue,o as J,p as Q,u as Se}from"./chunk-IRTZTEQF.js";import{o as R,q,u as ge}from"./chunk-25MDRJ6N.js";import"./chunk-4YRY4IP2.js";import"./chunk-ATB2IEIN.js";import"./chunk-VP2SXEXU.js";import{a as Y}from"./chunk-OQKDZ6KP.js";import"./chunk-CH6NKNWW.js";import{b as K,e as G,f as z,g as H,h as E,i as fe,l as U,m as W}from"./chunk-6OBNDO3B.js";import"./chunk-NXN4P4DR.js";import{a as X}from"./chunk-QASMVVIP.js";import{ma as ae,qa as me,xa as he}from"./chunk-UHXCHP4M.js";import{$b as T,Ab as j,Bb as n,Cb as o,Db as m,Hb as v,Ib as h,Jb as s,Qc as O,Sb as I,Tb as u,Vb as w,Xb as ce,Ya as c,Yb as se,Z as re,Zb as pe,_b as de,ac as D,ca as L,da as _,fb as r,ha as y,nc as C,ob as g,qb as N,ra as S,rb as d,sa as k,vb as b,wb as M,xb as V,zb as A,zc as x}from"./chunk-QSF35MWG.js";var P=class{id;name;technicalSkillCategoryId;categoryName;technicalSkillName;technicalSkillId;description;technicalSkills=[]},Z=class{id;indicator="";technicalCategory=new P;metricType=new ne},ne=class{id;name;description};var f=class t{constructor(i,e,l,a,p){this.spinnerService=i;this.messageService=e;this.confirmationService=l;this.confirmDialog=a;this.techSkillService=p;this.init()}state={$dataList:r([]),$dataListOri:r([]),$dataLoading:r(!1),$pagingInfo:r(new Y),$totalRowCount:r(1),$selectedData:r(null),$selectedVerified:r(!0),$loading:r(!1),$disabledTable:r(!1),$searchText:r(""),$searchBtnClickEvent:r(!1),$optionsMetricType:r([]),$descMetricType:r([]),$disabledUpdate:r(!0),$disabledSave:r(!0),$disabledCancel:r(!0),$formMode:r("idle"),$header:r("Daftar List Technical Skill"),$techSkillList:r([]),$techSkillLoading:r(!1),$techSkillpagingInfo:r(new Y),$techSkilltotalRowCount:r(1),$selectedtechSkill:r(null)};$dataList=this.state.$dataList.asReadonly();$dataListOri=this.state.$dataListOri.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=r([{header:"No",class_td:"!text-center",type:"number"},{field:"name",header:"Kategori Keahlian",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=x(()=>{let i=null;i={};let e;return e=this.$searchText()??"",i.name=e,i});$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$disabledSave=x(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=x(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=x(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();$header=this.state.$header.asReadonly();$techSkillList=this.state.$techSkillList.asReadonly();$techSkillLoading=this.state.$techSkillLoading.asReadonly();$selectedtechSkill=this.state.$selectedtechSkill.asReadonly();$techSkillpagingInfo=this.state.$techSkillpagingInfo.asReadonly();$techSkilltotalRowCount=this.state.$techSkilltotalRowCount.asReadonly();$colsTechSkill=r([{field:"name",header:"Technical Skill",class_td:"!text-center"},{field:"metricTypeId",header:"Type of Metrics",class_td:"!text-center",type:"dropdown"},{field:"delete",header:"Hapus",class_td:"!text-center",type:"delete"}]).asReadonly();init(){this.setSpinner(),this.populateList(),this.generateMetric()}setSpinner(){X(this.state.$loading).subscribe(i=>i?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let i={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()},e=[];this.techSkillService.findTechnialSkillCategoryPagination(i).subscribe(l=>{if(l.status){this.state.$pagingInfo.set(l.object.pagingInfo||new Y);for(let a of l.object.dataList)if(a.technicalSkills.length)for(let p of a.technicalSkills){let F={id:a.id,name:a.name,technicalSkillId:p.id,technicalSkillName:p.indicator,metricTypeId:p.metricType?.id,metricTypeName:p.metricType?.name};e.push(F)}this.state.$dataListOri.set(l.object.dataList||[]),this.state.$dataList.set(e||[]),this.state.$totalRowCount.set(l.object.totalRowCount||0)}this.state.$dataLoading.set(!1)})}onLazyLoad(i){this.populateList()}generateMetric(){let i=[],e=[];this.techSkillService.metricTypes().subscribe(l=>{l.status&&l.object.map(a=>{i.push({value:a.id,label:a.name}),e.push(a)})}),this.state.$optionsMetricType.set(i),this.state.$descMetricType.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataListOri.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$techSkillList.set([]),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked(i){this.state.$searchText.set(i),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddTechSkill(){this.resetState(),this.state.$formMode.set("add"),this.state.$header.set("Add Technical Skill")}editAction(i){let e=this.$dataListOri().findIndex(l=>l.id==i.id);this.state.$selectedData.set(i),this.state.$techSkillList.set(this.$dataListOri()[e].technicalSkills),this.state.$formMode.set("edit"),this.state.$header.set("Edit Technical Skill")}onSaveFormAdd(i){this.state.$formMode()==="add"?this.techSkillService.addTechnicalCategory(i).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})}):this.techSkillService.edit(i).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}deleteAction(i){this.state.$selectedData.set(i),this.confirmationService.confirm({header:"Konfirmasi",message:`Apakah Anda yakin ingin menghapus data ${this.$selectedData()?.name} ini?`,accept:()=>{this.techSkillService.delete(i.id).subscribe(e=>{if(e.status){let l=`Hapus Technical Skill ${this.$selectedData()?.name} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:l}),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill "),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}updateDataTechSkill(i){let e=new Z;e.indicator=i,this.state.$techSkillList().push(e)}static \u0275fac=function(e){return new(e||t)(L(he),L(me),L(ae),L(ae),L(ye))};static \u0275prov=re({token:t,factory:t.\u0275fac})};var te=class t{techSkillStore=_(f);search=this.techSkillStore.$searchText();searchForm=new H({search:new E({value:"",disabled:!1})});tempSearch="";constructor(){this.onSearchChanges()}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(i=>{this.tempSearch=i})}onButtonClicked(){this.techSkillStore.onSearchBtnClicked(this.tempSearch)}onRefreshSearch(){this.searchForm.controls.search.setValue(""),this.techSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-technical-skill-search"]],standalone:!0,features:[T],decls:7,vars:1,consts:[[1,"grid","grid-cols-6","grid-flow-rows","gap-2",3,"formGroup"],[1,"col-span-6","md:col-span-6"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"p-inputgroup",1),m(2,"input",2),n(3,"p-inputgroup-addon")(4,"p-button",3),h("click",function(){return l.onButtonClicked()}),o()(),n(5,"p-inputgroup-addon")(6,"p-button",4),h("click",function(){return l.onRefreshSearch()}),o()()()()),e&2&&d("formGroup",l.searchForm)},dependencies:[$,K,G,z,q,R,ke,ge,U,W]})};var Fe=()=>[5,10,20];function Le(t,i){if(t&1&&(n(0,"th",10),u(1),o()),t&2){let e=i.$implicit;c(),w(" ",e.header," ")}}function Me(t,i){if(t&1&&(n(0,"tr"),g(1,Le,2,1,"th",9),o()),t&2){let e=i.$implicit;c(),d("ngForOf",e)}}function De(t,i){if(t&1&&(n(0,"td"),u(1),o()),t&2){let e=s().$implicit,l=s().rowIndex;b(e.class_td),c(),w(" ",l+1," ")}}function Re(t,i){if(t&1){let e=v();n(0,"td"),m(1,"p-button",13),n(2,"p-button",14),h("click",function(){S(e);let a=s(2).$implicit,p=s();return k(p.techSkillStore.editAction(a))}),o()()}if(t&2){let e=s().$implicit;b(e.class_td)}}function Ie(t,i){if(t&1&&(n(0,"td"),u(1),o()),t&2){let e=s().$implicit,l=s().$implicit;b(e.class_td),c(),w(" ",l[e.field]," ")}}function Ee(t,i){if(t&1&&g(0,De,2,3,"td",12)(1,Re,3,2,"td",12)(2,Ie,2,3,"td",12),t&2){let e,l=i.$implicit;M((e=l.type)==="number"?0:e==="action"?1:2)}}function Pe(t,i){if(t&1&&(n(0,"tr",11),A(1,Ee,3,1,null,null,V),o()),t&2){let e=i.$implicit,l=i.columns;d("pSelectableRow",e),c(),j(l)}}function Ne(t,i){if(t&1&&(n(0,"tr")(1,"td",15),u(2,"Data Kosong"),o()()),t&2){let e=s();c(),N("colspan",e.techSkillStore.$cols().length)}}var ie=class t{techSkillStore=_(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-technical-skill-list"]],standalone:!0,features:[T],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","justify-end","items-center","gap-1","flex-col","md:flex-row","mb-2","w-full"],["styleClass","p-button-contrast w-full","icon","pi pi-plus","label","Tambah Keahlian Teknis",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],["styleClass","p-button-warn","icon","pi pi-eye","pTooltip","Lihat Data","tooltipPosition","bottom"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Ubah Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let a=v();n(0,"div",4)(1,"div",5)(2,"p-button",6),h("click",function(){return S(a),k(l.techSkillStore.onAddTechSkill())}),o(),m(3,"app-technical-skill-search"),o(),n(4,"p-table",7,0),h("onLazyLoad",function(F){return S(a),k(l.techSkillStore.onLazyLoad(F))}),g(6,Me,2,1,"ng-template",null,1,C)(8,Pe,3,1,"ng-template",null,2,C)(10,Ne,3,1,"ng-template",null,3,C),o()(),m(12,"p-blockui",8)}if(e&2){let a=I(5),p=I(9);c(4),d("columns",l.techSkillStore.$cols())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",D(11,Fe))("paginatorDropdownAppendTo",p)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),c(8),d("blocked",l.techSkillStore.$disabledTable())("target",a)}},dependencies:[$,R,J,Q,O,Se,B,te]})};var Ve=()=>[5,10,20];function Ae(t,i){if(t&1&&(n(0,"th",20),u(1),o()),t&2){let e=i.$implicit;c(),w(" ",e.header," ")}}function je(t,i){if(t&1&&(n(0,"tr"),g(1,Ae,2,1,"th",19),o()),t&2){let e=i.$implicit;c(),d("ngForOf",e)}}function Oe(t,i){if(t&1){let e=v();n(0,"td")(1,"p-button",23),h("click",function(){S(e);let a=s(2).$implicit,p=s();return k(p.techSkillStore.deleteAction(a))}),o()()}if(t&2){let e=s().$implicit;b(e.class_td)}}function Be(t,i){if(t&1){let e=v();n(0,"td")(1,"p-dropdown",24),pe("ngModelChange",function(a){S(e);let p=s().$implicit,F=s().$implicit;return se(F[p.field],a)||(F[p.field]=a),k(a)}),o()()}if(t&2){let e=s().$implicit,l=s().$implicit,a=s();b(e.class_td),c(),d("options",a.techSkillStore.$optionsMetricType()),ce("ngModel",l[e.field])}}function Ke(t,i){if(t&1&&(n(0,"td"),u(1),o()),t&2){let e=s().$implicit,l=s().$implicit;b(e.class_td),c(),w(" ",l[e.field]," ")}}function Ge(t,i){if(t&1&&g(0,Oe,2,2,"td",22)(1,Be,2,4,"td",22)(2,Ke,2,3,"td",22),t&2){let e,l=i.$implicit;M((e=l.type)==="delete"?0:e==="dropdown"?1:2)}}function ze(t,i){if(t&1&&(n(0,"tr",21),A(1,Ge,3,1,null,null,V),o()),t&2){let e=i.$implicit,l=i.columns;d("pSelectableRow",e),c(),j(l)}}function He(t,i){if(t&1&&(n(0,"tr")(1,"td",25),u(2,"Data Kosong"),o()()),t&2){let e=s();c(),N("colspan",e.techSkillStore.$cols().length)}}var le=class t{techSkillStore=_(f);$header=x(()=>"Technical Skill Form");techSKillForm=new H({category:new E({value:"",disabled:!1}),techSkill:new E({value:"",disabled:!1})});selectedDataSubscription;constructor(){this.selectedDataSubscription=X(this.techSkillStore.$selectedData).subscribe(i=>{this.techSKillForm.patchValue({category:this.techSkillStore.$selectedData()?.name}),this.techSkillStore.$selectedData()?.name&&this.techSKillForm.controls.category.disable()})}onSave(){let i=new P;i.id=this.techSkillStore.$selectedData()?.id,i.name=this.techSKillForm.get("category")?.value,i.technicalSkills=this.techSkillStore.$techSkillList(),this.techSkillStore.onSaveFormAdd(i)}addData(){this.techSkillStore.updateDataTechSkill(this.techSKillForm.get("techSkill")?.value),this.techSKillForm.get("category")?.value&&this.techSKillForm.controls.category.disable(),this.techSKillForm.controls.techSkill.setValue("")}ngOnDestroy(){this.techSKillForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-technical-skill-form"]],standalone:!0,features:[T],decls:27,vars:10,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["pInputText","","formControlName","category","name","category",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["pInputText","","formControlName","techSkill","name","techSkill",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["styleClass","p-button-contrast","icon","pi pi-plus","pTooltip","Tambah Technical Skill",3,"click"],[1,"pt-4"],[2,"font-weight","600"],["showGridlines","",3,"columns","value","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Technical Skill",3,"click"],["styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"ngModelChange","options","ngModel"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let a=v();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"label",8),u(5,"Nama Kategori:"),o(),m(6,"input",9),o(),n(7,"div",7)(8,"label",8),u(9,"Nama Skill:"),o(),m(10,"input",10),n(11,"p-button",11),h("click",function(){return S(a),k(l.addData())}),o()()(),n(12,"div",12)(13,"span",13),u(14,"List Technical Skill yang dipilih:"),o(),n(15,"p-table",14,0),g(17,je,2,1,"ng-template",null,1,C)(19,ze,3,1,"ng-template",null,2,C)(21,He,3,1,"ng-template",null,3,C),o()()(),n(23,"div",15)(24,"div",16)(25,"p-button",17),h("click",function(){return S(a),k(l.onSave())}),o(),n(26,"p-button",18),h("click",function(){return S(a),k(l.techSkillStore.onCancelFormAdd())}),o()()()()}if(e&2){let a=I(20);c(2),d("formGroup",l.techSKillForm),c(13),d("columns",l.techSkillStore.$colsTechSkill())("value",l.techSkillStore.$techSkillList())("paginator",!0)("rows",5)("rowsPerPageOptions",D(9,Ve))("paginatorDropdownAppendTo",a)("totalRecords",l.techSkillStore.$techSkillList().length),c(10),d("disabled",l.techSkillStore.$disabledSave())}},dependencies:[$,K,G,z,fe,q,R,J,Q,O,B,_e,U,W]})};var Ue=()=>["add","edit"];function We(t,i){t&1&&m(0,"app-technical-skill-list")}function qe(t,i){t&1&&m(0,"app-technical-skill-form")}var Te=class t{techSkillStore=_(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-technical-skill-reference"]],standalone:!0,features:[de([f]),T],decls:4,vars:3,consts:[[1,"w-full"],[1,"blue",3,"header"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"p-panel",1),g(2,We,1,0,"app-technical-skill-list")(3,qe,1,0,"app-technical-skill-form"),o()()),e&2&&(c(),d("header",l.techSkillStore.$header()),c(),M(l.techSkillStore.$formMode()==="idle"?2:D(2,Ue).includes(l.techSkillStore.$formMode())?3:-1))},dependencies:[$,ue,ie,le]})};export{Te as TechnicalSkillReferenceComponent};
